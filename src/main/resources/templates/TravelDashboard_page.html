<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/TravelDashboard.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/webjars/bootstrap/5.1.3/css/bootstrap.min.css">
  <script src="/webjars/bootstrap/5.1.3/js/bootstrap.min.js"></script>
  <script src="scripts/TravelScript.js"></script>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
</head>
<body style="background-color: #313348;">
<aside class="sidebar position-fixed top-0 left-0 overflow-auto h-100 float-left" id="show-side-navigation1">
  <i class="uil-bars close-aside d-md-none d-lg-none" data-close="show-side-navigation1"></i>
  <div class="sidebar-header d-flex justify-content-center align-items-center px-3 py-4">
    <img
            class="rounded-pill img-fluid"
            width="65"
            src="https://uniim1.shutterfly.com/ng/services/mediarender/THISLIFE/021036514417/media/23148907008/medium/1501685726/enhance"
            alt="">

    <div class="ms-2">
      <h5 class="fs-6 mb-0">
        <a class="text-decoration-none" th:text="${user.getLogin()}"></a>
      </h5>
    </div>
  </div>

  <div class="search position-relative text-center px-4 py-3 mt-2">
    <input type="text" class="form-control w-100 border-0 bg-transparent" placeholder="Search here">
    <i class="fa fa-search position-absolute d-block fs-6"></i>
  </div>
  <ul class="categories list-unstyled">
    <li class="has-dropdown">
      <i class="uil-estate fa-fw"></i><a href="/dashboard"> Dashboard</a>
    </li>
    <li class="has-dropdown">
      <i class="uil-estate fa-fw"></i><a href="/travelDashboard"> Travel </a>
    </li>
    <li class="has-dropdown">
      <i class="uil-estate fa-fw"></i><a href="/dashboardBus"> Bus </a>
    </li>
    <li class="has-dropdown">
      <i class="uil-estate fa-fw"></i><a href=""> Users</a>
    </li>
  </ul>
</aside>

<section id="wrapper">
  <nav class="navbar navbar-expand-md">
    <div class="container-fluid mx-2">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">CleverVision <span class="main-color">Admin</span></a>
      </div>
      <div class="collapse navbar-collapse" id="toggle-navbar">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"> <a class="nav-link" href="/main"> <i class="bi bi-house-door-fill"></i> HOME </a> </li>
          <li class="nav-item" th:if="${user.getRole()==3}"> <a class="nav-link" href="/dashboard"><i class="bi bi-shield-fill"></i> DASHBOARD</a> </li>
          <li  class="nav-item" th:if="${user.getRole()==2}"> <a class="nav-link" href="/driverDashboard"><i class="bi bi-shield-fill"></i> DRIVER DASHBOARD</a> </li>
          <li class="nav-item"> <a class="nav-link" href="/editProfile" th:text="${user.getLogin()}"><i class="bi bi-person-fill"></i></a> </li>
          <li class="nav-item"> <a  class="nav-link"href="/logout"><i class="bi bi-box-arrow-right"></i> LOGOUT</a></li>
        </ul>
      </div>

    </div>
  </nav>

  <div class="p-4">
    <div class="welcome">
      <div class="content rounded-3 p-3">
        <h1 class="fs-3">Travel Dashboard</h1>
      </div>
    </div>
    <div class="">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row">
            <div class="col-sm-6">
              <h2>Manage <b>Travels</b></h2>
            </div>
            <div class="col-sm-6">
              <a href="#addEmployeeModal" class="btn btn-success" data-toggle="modal"><i class="bi bi-calendar-plus-fill"></i> <span>Plan new travel</span></a>
              <a href="#deleteEmployeeModal" class="btn btn-danger" data-toggle="modal"> <i class="bi bi-calendar2-x-fill"></i><span>Delete</span></a>
            </div>
          </div>
        </div>
        <table class="table table-striped table-hover">
          <thead>
          <tr>
            <th>
                                  <span class="custom-checkbox">
                                      <input type="checkbox" id="selectAll">
                                      <label for="selectAll"></label>
                                  </span>
            </th>
            <th>Destination</th>
            <th>Depart Time</th>
            <th>Bus ID</th>
            <th>Driver ID </th>
            <th>Driver Name</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="voy:${VoyageList}">
            <td>
                                  <span class="custom-checkbox">
                                      <input type="checkbox" id="checkbox1" name="options[]" value="1">
                                      <label for="checkbox1"></label>
                                  </span>
            </td>
            <td th:text="${voy.getDestination() == 1?'Bizerte - IsetB':'IsetB - Bizerte'}" ></td>
            <td th:text="${voy.getHeureDepart()}">thomashardy@mail.com</td>
            <td th:text="${voy.getBus().getMat()}"></td>
            <td th:text="${voy.getDriver().getId()}"></td>
            <td th:text="${voy.getDriver().getLogin()}"></td>
            <td>
              <a href="#editEmployeeModal" class="edit" data-toggle="modal"><i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i></a>
              <a href="#deleteEmployeeModal" class="delete" data-toggle="modal"><i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a>
            </td>
          </tr>
          </tbody>
        </table>

        <div class="clearfix">
          <div class="hint-text">Showing <b>5</b> out of <b>25</b> entries</div>
          <ul class="pagination">
            <li class="page-item disabled"><a href="#">Previous</a></li>
            <li class="page-item"><a href="#" class="page-link">1</a></li>
            <li class="page-item"><a href="#" class="page-link">2</a></li>
            <li class="page-item active"><a href="#" class="page-link">3</a></li>
            <li class="page-item"><a href="#" class="page-link">4</a></li>
            <li class="page-item"><a href="#" class="page-link">5</a></li>
            <li class="page-item"><a href="#" class="page-link">Next</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div id="addEmployeeModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <form method="post" action="/StartBus" th:object="${StartBusRequest}" onsubmit="return confirm('Are you sure you want to plan Travel ?')">

            <div class="modal-header">
              <h4 class="modal-title">Plan Travel</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label>Destination</label>
                <select class="form-select" aria-label="Default select example" name="destination">
                  <option value="1" selected>Bizerte - IsetBZ</option>
                  <option value="2">Iset - Bizerte </option>
                </select>
              </div>
              <div class="form-group">
                <label>Driver</label>
                <select class="form-select" aria-label="Default select example" name="driverId" required>
                  <option th:each="driver:${DriversList}"
                          th:value="${driver.getId()}"
                          th:text="'Driver ID :  ' + ${driver.getId()} + ' Name:  ' + ${driver.getLogin()}">
                  </option>
                </select>
              </div>
              <div class="form-group">
                <label>Depart time</label>
                <input type="time" class="form-control" value="10:05 AM" name="startTime" required/>

              </div>
              <div class="form-group">
                <label>Bus</label>
                <select class="form-select" aria-label="Default select example" name="busId" required>
                  <option th:each="bus:${BusList}"
                          th:value="${bus.getMat()}"
                          th:text="'Name: ' + ${bus.getMat()} + ' Brand :  ' + ${bus.getMarque()}" selected></option>
                </select>
              </div>
            </div>
            <div class="modal-footer">
              <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
              <input type="submit" class="btn btn-success" value="Add">
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

</body>
</html>